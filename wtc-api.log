WARN[0000] No services to build
[+] up 13/13
 ✔ Network wtc-network           Created                                                                           0.0s
 ✔ Volume wtc-db-data            Created                                                                           0.0s
 ✔ Volume wtc-grafana-data       Created                                                                           0.0s
 ✔ Volume wtc-loki-data          Created                                                                           0.0s
 ✔ Volume wtc-controller-logs    Created                                                                           0.0s
 ✔ Volume wtc-promtail-positions Created                                                                           0.0s
 ✔ Container wtc-database        Healthy                                                                          14.1s
 ✔ Container wtc-ui              Created                                                                           0.2s
 ✔ Container wtc-controller      Healthy                                                                           5.5s
 ✔ Container wtc-loki            Healthy                                                                          21.1s
 ✔ Container wtc-api             Created                                                                           0.1s
 ✔ Container wtc-grafana         Created                                                                           0.1s
 ✔ Container wtc-promtail        Created                                                                           0.1s
dependency failed to start: container wtc-database is unhealthy
root@wet:~# docker restart wtc-api
wtc-api
root@wet:~# docker logs wtc-api
INFO:     Started server process [7]
INFO:     Waiting for application startup.
2026-01-21 20:30:32 INFO     app.main: Starting Water Treatment Controller API
2026-01-21 20:30:32 INFO     app.core.startup: Startup validation completed in mode: development
2026-01-21 20:30:32 INFO     app.core.startup: READY: python_modules - All Python dependencies available (0.0ms)
2026-01-21 20:30:32 INFO     app.core.startup: READY: paths - All paths validated (0.4ms)
2026-01-21 20:30:32 INFO     app.core.startup: READY: database - Database accessible and writable (2.6ms)
2026-01-21 20:30:32 WARNING  app.core.startup: DEGRADED: net_raw_capability - ICMP ping available (unprivileged), DCP discovery unavailable. RECOMMENDED: Add CAP_NET_RAW capability for DCP discovery
2026-01-21 20:30:32 WARNING  app.core.startup: DEGRADED: ipc_shm - IPC module not available - simulation mode. RECOMMENDED: Investigate
2026-01-21 20:30:32 WARNING  app.core.startup: STARTUP DEGRADED: System operational but with issues. Degraded: ['net_raw_capability', 'ipc_shm']
2026-01-21 20:30:32 INFO     app.main: Database initialized (SQLAlchemy)
2026-01-21 20:30:32 INFO     app.main: Default admin user verified
2026-01-21 20:30:32 INFO     app.services.websocket_publisher: DataPublisher started
2026-01-21 20:30:32 INFO     app.services.websocket_publisher: WebSocket data publisher initialized
2026-01-21 20:30:32 INFO     app.services.controller_heartbeat: ControllerHeartbeat started (interval: 10s)
2026-01-21 20:30:32 INFO     app.services.controller_heartbeat: Controller heartbeat service initialized
2026-01-21 20:30:32 WARNING  app.main: STARTUP COMPLETE: System operational but degraded: ['net_raw_capability', 'ipc_shm']
2026-01-21 20:30:32 INFO     app.services.websocket_publisher: Starting publish loop with 1000ms interval
2026-01-21 20:30:32 INFO     app.services.controller_heartbeat: Starting controller heartbeat loop
2026-01-21 20:30:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     ('172.18.0.3', 50190) - "WebSocket /api/v1/ws/live" [accepted]
2026-01-21 20:30:32 INFO     app.api.websocket: WebSocket connected. Total connections: 1
INFO:     connection open
INFO:     ('172.18.0.3', 50194) - "WebSocket /api/v1/ws/live" [accepted]
2026-01-21 20:30:32 INFO     app.api.websocket: WebSocket connected. Total connections: 2
INFO:     connection open
2026-01-21 20:30:33 INFO     shm_client: Connected to WTC shared memory (version 3)
2026-01-21 20:30:33 INFO     app.services.profinet_client: Connected to PROFINET controller via shared memory
2026-01-21 20:30:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:30:45 INFO     [fda88ccb] app.api.v1.discover: Starting ICMP ping scan of 192.168.6.0/24 (254 hosts)
2026-01-21 20:30:45 INFO     [fda88ccb] app.api.v1.discover: ICMP: Using unprivileged mode (SOCK_DGRAM) - no CAP_NET_RAW needed
2026-01-21 20:30:48 INFO     [fda88ccb] app.api.v1.discover: ICMP scan complete: 3/254 hosts reachable in 3.01s
2026-01-21 20:30:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:30:54 INFO     [3828f36f] shm_client: Sending ADD_RTU command: rtu-000000 at 192.168.6.7
2026-01-21 20:30:54 WARNING  [3828f36f] app.api.v1.rtus: Could not register RTU rtu-000000 with controller: required argument is not an integer
2026-01-21 20:31:01 INFO     [e93e6a40] httpx: HTTP Request: GET http://192.168.6.7:9081/health "HTTP/1.1 200 OK"
2026-01-21 20:31:01 INFO     [e93e6a40] app.api.v1.rtus: RTU probe rtu-000000 (http://192.168.6.7:9081/health): 200 in 32.1ms
2026-01-21 20:31:01 INFO     [e93e6a40] app.api.v1.rtus: RTU rtu-000000 is HTTP-reachable but PROFINET state is OFFLINE
2026-01-21 20:31:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:31:06 INFO     app.api.websocket: WebSocket disconnected. Total connections: 1
INFO:     connection closed
INFO:     ('172.18.0.3', 53822) - "WebSocket /api/v1/ws/live" [accepted]
2026-01-21 20:31:06 INFO     app.api.websocket: WebSocket connected. Total connections: 2
INFO:     connection open
2026-01-21 20:31:11 INFO     [1f4bff70] shm_client: Sending ADD_RTU command: rtu-000000 at 192.168.6.7
2026-01-21 20:31:11 WARNING  [1f4bff70] app.api.v1.rtus: Could not ensure RTU rtu-000000 is registered: required argument is not an integer
2026-01-21 20:31:11 INFO     [1f4bff70] app.models.rtu: RTU rtu-000000: OFFLINE → CONNECTING (reason: Transition from OFFLINE)
2026-01-21 20:31:11 INFO     [1f4bff70] shm_client: Sending CONNECT_RTU command: rtu-000000
2026-01-21 20:31:11 ERROR    app.core.errors: Unhandled exception (request_id=1f4bff70-abf2-46c4-9bdd-3a1c83d1e7cb): 'str' object has no attribute 'value'
  + Exception Group Traceback (most recent call last):
  |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/main.py", line 266, in add_correlation_id
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/core/rate_limit.py", line 252, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/api/v1/rtus.py", line 681, in refresh_rtu_inventory
    |     "state": RtuState.CONNECTING.value
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^
    | AttributeError: 'str' object has no attribute 'value'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/main.py", line 266, in add_correlation_id
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/core/rate_limit.py", line 252, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/v1/rtus.py", line 681, in refresh_rtu_inventory
    "state": RtuState.CONNECTING.value
             ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'value'
ERROR:    Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/main.py", line 266, in add_correlation_id
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/core/rate_limit.py", line 252, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/api/v1/rtus.py", line 681, in refresh_rtu_inventory
    |     "state": RtuState.CONNECTING.value
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^
    | AttributeError: 'str' object has no attribute 'value'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/main.py", line 266, in add_correlation_id
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/core/rate_limit.py", line 252, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/v1/rtus.py", line 681, in refresh_rtu_inventory
    "state": RtuState.CONNECTING.value
             ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'value'
2026-01-21 20:31:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:31:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:31:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:31:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:31:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:32:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:32:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:32:20 INFO     app.api.websocket: WebSocket disconnected. Total connections: 1
INFO:     connection closed
INFO:     ('172.18.0.3', 41102) - "WebSocket /api/v1/ws/live" [accepted]
2026-01-21 20:32:20 INFO     app.api.websocket: WebSocket connected. Total connections: 2
INFO:     connection open
2026-01-21 20:32:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:32:24 INFO     [e5b54a28] httpx: HTTP Request: GET http://192.168.6.7:9081/health "HTTP/1.1 200 OK"
2026-01-21 20:32:24 INFO     [e5b54a28] app.api.v1.rtus: RTU probe rtu-000000 (http://192.168.6.7:9081/health): 200 in 12.4ms
2026-01-21 20:32:26 INFO     [c3acabe7] httpx: HTTP Request: GET http://192.168.6.7:9081/health "HTTP/1.1 200 OK"
2026-01-21 20:32:26 INFO     [c3acabe7] app.api.v1.rtus: RTU probe rtu-000000 (http://192.168.6.7:9081/health): 200 in 15.8ms
2026-01-21 20:32:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:32:36 INFO     [e4f5e454] app.core.network: Auto-detected network interface: enp0s3 (state: UP)
2026-01-21 20:32:36 INFO     [e4f5e454] app.api.v1.discover: Starting DCP discovery on enp0s3 (timeout: 10s)
2026-01-21 20:32:36 ERROR    app.services.dcp_discovery: DCP discovery requires CAP_NET_RAW capability. Run with sudo or add capability.
2026-01-21 20:32:36 ERROR    [e4f5e454] app.api.v1.discover: DCP discovery failed: CAP_NET_RAW capability required
2026-01-21 20:32:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:32:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:33:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:33:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:33:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:33:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:33:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:33:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:34:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:34:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:34:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:34:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:34:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:34:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:35:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:35:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:35:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:35:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:35:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:35:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:36:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:36:02 INFO     [c766e3d8] httpx: HTTP Request: GET http://192.168.6.7:9081/health "HTTP/1.1 200 OK"
2026-01-21 20:36:02 INFO     [c766e3d8] app.api.v1.rtus: RTU probe rtu-000000 (http://192.168.6.7:9081/health): 200 in 11.8ms
2026-01-21 20:36:03 INFO     [416c8180] httpx: HTTP Request: GET http://192.168.6.7:9081/health "HTTP/1.1 200 OK"
2026-01-21 20:36:03 INFO     [416c8180] app.api.v1.rtus: RTU probe rtu-000000 (http://192.168.6.7:9081/health): 200 in 11.1ms
2026-01-21 20:36:10 INFO     app.api.websocket: WebSocket disconnected. Total connections: 1
INFO:     connection closed
INFO:     ('172.18.0.3', 33056) - "WebSocket /api/v1/ws/live" [accepted]
2026-01-21 20:36:10 INFO     app.api.websocket: WebSocket connected. Total connections: 2
INFO:     connection open
2026-01-21 20:36:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:36:17 ERROR    app.core.errors: Unhandled exception (request_id=044ccbb0-bb43-465b-9116-35f7bf3e432d): 'str' object has no attribute 'value'
  + Exception Group Traceback (most recent call last):
  |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/main.py", line 266, in add_correlation_id
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/core/rate_limit.py", line 252, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/api/v1/rtus.py", line 700, in refresh_rtu_inventory
    |     "state": RtuState.CONNECTING.value
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^
    | AttributeError: 'str' object has no attribute 'value'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/main.py", line 266, in add_correlation_id
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/core/rate_limit.py", line 252, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/v1/rtus.py", line 700, in refresh_rtu_inventory
    "state": RtuState.CONNECTING.value
             ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'value'
ERROR:    Exception in ASGI application
  + Exception Group Traceback (most recent call last):
  |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 186, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "/usr/local/lib/python3.11/site-packages/anyio/_backends/_asyncio.py", line 783, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    |     result = await app(  # type: ignore[func-returns-value]
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    |     return await self.app(scope, receive, send)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    |     await super().__call__(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/main.py", line 266, in add_correlation_id
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    |     with collapse_excgroups():
    |   File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/core/rate_limit.py", line 252, in dispatch
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    |     raise app_exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    |     await self.simple_response(scope, receive, send, request_headers=headers)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    |     await self.app(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    |     await route.handle(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    |     response = await f(request)
    |                ^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    |     raw_response = await run_endpoint_function(
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    |     return await dependant.call(**values)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "/app/app/api/v1/rtus.py", line 700, in refresh_rtu_inventory
    |     "state": RtuState.CONNECTING.value
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^
    | AttributeError: 'str' object has no attribute 'value'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/main.py", line 266, in add_correlation_id
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 185, in __call__
    with collapse_excgroups():
  File "/usr/local/lib/python3.11/contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.11/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 187, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/core/rate_limit.py", line 252, in dispatch
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 163, in call_next
    raise app_exc
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/base.py", line 149, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/api/v1/rtus.py", line 700, in refresh_rtu_inventory
    "state": RtuState.CONNECTING.value
             ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'value'
2026-01-21 20:36:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:36:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:36:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:36:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:37:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:37:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:37:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:37:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:37:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:37:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:38:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:38:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:38:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:38:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:38:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:38:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:39:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:39:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:39:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:39:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:39:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:39:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:40:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:40:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:40:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:40:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:40:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:40:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:41:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:41:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:41:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:41:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:41:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:41:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:42:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:42:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:42:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:42:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:42:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:42:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:43:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:43:12 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:43:22 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:43:32 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:43:42 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:43:52 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
2026-01-21 20:44:02 ERROR    app.services.controller_heartbeat: Error in heartbeat loop: attempted relative import beyond top-level package
Traceback (most recent call last):
  File "/app/app/services/controller_heartbeat.py", line 126, in _heartbeat_loop
    await self._check_and_reconnect()
  File "/app/app/services/controller_heartbeat.py", line 138, in _check_and_reconnect
    from .shm_client import get_shm_client
  File "/app/app/services/shm_client.py", line 14, in <module>
    from ....shm_client import (
ImportError: attempted relative import beyond top-level package
